@config "../../tailwind.config.js";
@import "tailwindcss";

/* -----------------------------
   BASE
------------------------------ */
@layer base {
  html { @apply scroll-smooth; }
  body { @apply bg-slate-50 text-slate-800 antialiased font-sans; }

  /* NO pongas color global a todos los links */
  a { @apply transition-colors; }

  :focus-visible {
    @apply outline-none ring-2 ring-brand-500/60 ring-offset-2 ring-offset-slate-50;
  }
}

/* -----------------------------
   COMPONENTS
------------------------------ */
@layer components {
  /* Helpers */
  .hover-lift { @apply transition-transform duration-200 ease-out hover:-translate-y-0.5; }
  .soft-shadow { @apply shadow-sm hover:shadow-md transition-shadow duration-200; }
  .focus-ring {
    @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/60
           focus-visible:ring-offset-2 focus-visible:ring-offset-white;
  }

  /* Hero glow (Home) */
  .hero-top-glow {
    @apply pointer-events-none absolute inset-x-0 -top-24 h-48;
    background: linear-gradient(to bottom, rgba(191,219,254,.70), transparent);
  }

  /* Cards */
  .card {
    @apply rounded-2xl border border-slate-200 bg-white overflow-hidden
           shadow-sm transition-all duration-200 hover:-translate-y-0.5 hover:shadow-md;
  }
  .card-body { @apply p-6; }

  /* Panels */
  .panel { @apply rounded-2xl border border-slate-200 bg-white px-5 py-4; }
  .panel-soft { @apply rounded-2xl border border-slate-200 bg-slate-50 px-5 py-4; }

  /* Home CTA blocks */
  .cta-box { @apply rounded-2xl border border-slate-200 bg-slate-50 p-6; }
  .cta-yes { @apply mt-4 rounded-xl border border-blue-200 bg-blue-50 px-4 py-3; }
  .cta-yes-title { @apply text-sm font-semibold text-blue-900; }
  .cta-yes-text  { @apply mt-1 text-sm text-blue-900/80; }

  /* Clamp multi-línea SIN plugin */
  .clamp-1,.clamp-2,.clamp-3,.clamp-4 { display: -webkit-box; -webkit-box-orient: vertical; overflow: hidden; }
  .clamp-1 { -webkit-line-clamp: 1; }
  .clamp-2 { -webkit-line-clamp: 2; }
  .clamp-3 { -webkit-line-clamp: 3; }
  .clamp-4 { -webkit-line-clamp: 4; }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-xl px-4 py-2
           text-sm font-medium transition-all duration-200 hover:-translate-y-0.5
           focus:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/60
           focus-visible:ring-offset-2 focus-visible:ring-offset-white;
  }
  .btn-primary {
    @apply text-white shadow-sm bg-gradient-to-b from-brand-600 to-brand-700
           hover:from-brand-500 hover:to-brand-700;
  }
  .btn-accent {
    @apply text-white shadow-sm bg-gradient-to-b from-indigo-500 to-indigo-700
           hover:from-indigo-400 hover:to-indigo-700;
  }
  .btn-dark { @apply bg-slate-900 text-white hover:bg-slate-800; }
  .btn-ghost { @apply bg-transparent text-slate-700 hover:bg-slate-100; }

  /* Inputs */
  .input {
    @apply w-full max-w-full min-w-0 rounded-lg border border-slate-300 bg-white
           px-3 py-2 text-sm text-slate-800 placeholder:text-slate-400 transition
           focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20;
  }
  .label { @apply mb-1 block text-sm font-medium text-slate-700; }
  .help  { @apply mt-1 text-xs text-slate-500 break-all; }

  /* Badges */
  .badge {
    @apply inline-flex items-center rounded-full border border-slate-200 bg-slate-50
           px-2.5 py-1 text-xs font-medium text-slate-700;
  }
  .badge-amber { @apply border-amber-200 bg-amber-50 text-amber-800; }
  .badge-green { @apply border-emerald-200 bg-emerald-50 text-emerald-800; }
  .badge-red   { @apply border-red-200 bg-red-50 text-red-800; }
  .badge-blue  { @apply border-blue-200 bg-blue-50 text-blue-800; }

  /* Booking status badges */
  .badge-status-pending {
    @apply inline-flex items-center rounded-full border border-slate-200 bg-slate-50
           px-2.5 py-1 text-xs font-medium text-slate-700;
  }
  .badge-status-accepted {
    @apply inline-flex items-center rounded-full border border-emerald-200 bg-emerald-50
           px-2.5 py-1 text-xs font-medium text-emerald-800;
  }
  .badge-status-rejected,
  .badge-status-canceled {
    @apply inline-flex items-center rounded-full border border-red-200 bg-red-50
           px-2.5 py-1 text-xs font-medium text-red-800;
  }
  .badge-status-change_requested,
  .badge-status-cancel_requested {
    @apply inline-flex items-center rounded-full border border-amber-200 bg-amber-50
           px-2.5 py-1 text-xs font-medium text-amber-800;
  }

  /* Alerts */
  .alert { @apply rounded-2xl border px-5 py-4 text-sm shadow-sm; }
  .alert-info    { @apply border-blue-200 bg-blue-50 text-blue-900; }
  .alert-success { @apply border-emerald-200 bg-emerald-50 text-emerald-900; }
  .alert-warn    { @apply border-amber-200 bg-amber-50 text-amber-900; }
  .alert-danger  { @apply border-red-200 bg-red-50 text-red-900; }

  /* Bullets en listas */
  .list-bullets > li { @apply flex gap-2; }
  .list-bullets > li::before { content: "•"; @apply text-slate-400; }


  /* -----------------------------
     SMOOTH DROPDOWNS (DETAILS)
  ------------------------------ */

  /* Account dropdown: panel animado */
  .account-dd > .account-dd__panel{
    z-index: 60;
    transform-origin: top right;
    opacity: 0;
    transform: translateY(-6px) scale(.98);
    max-height: 0;
    pointer-events: none;
    transition: opacity .18s ease, transform .18s ease, max-height .22s ease;
  }
  .account-dd[open] > .account-dd__panel{
    opacity: 1;
    transform: translateY(0) scale(1);
    max-height: 70vh;
    pointer-events: auto;
  }
  .account-dd[open] .chev{ transform: rotate(180deg); }

  /* Mobile menu dropdown (si le pones class="mobile-menu" al panel) */
  details > .mobile-menu{
    z-index: 60;
    transform-origin: top right;
    opacity: 0;
    transform: translateY(-6px) scale(.98);
    max-height: 0;
    pointer-events: none;
    transition: opacity .18s ease, transform .18s ease, max-height .22s ease;
  }
  details[open] > .mobile-menu{
    opacity: 1;
    transform: translateY(0) scale(1);
    max-height: 70vh;
    pointer-events: auto;
  }


  /* -----------------------------
    COOKIE CONSENT (BANNER + MODAL)
    toggle de clase .is-open
  ------------------------------ */

  #cookie-banner{
    opacity: 0;
    transform: translateY(10px);
    pointer-events: none;
  }
  #cookie-banner.is-open{
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }

  #cookie-modal{
    opacity: 0;
    pointer-events: none;
    /* evita “rebotes” y scroll del fondo en móvil */
    overscroll-behavior: contain;
  }
  #cookie-modal.is-open{
    opacity: 1;
    pointer-events: auto;
  }

  /* Overlay */
  #cookie-modal > .absolute{
    opacity: 0;
    transition: opacity .2s ease;
  }
  #cookie-modal.is-open > .absolute{
    opacity: 1;
  }

  /* Card/panel (solo el modal, no el resto de cards) */
  #cookie-modal .cookie-modal__card{
    opacity: 0;
    transform: translateY(16px) scale(.98);
    transition: opacity .2s ease, transform .2s ease;
  }
  #cookie-modal.is-open .cookie-modal__card{
    opacity: 1;
    transform: translateY(0) scale(1);
  }

  /* Layout del modal: asegura alto real en móvil */
  .cookie-modal__wrap{
    @apply relative mx-auto flex min-h-dvh max-w-4xl items-end px-4 py-6 sm:items-center sm:px-6;
  }

  /* Card modal: SIN hover/translate, columna + alto máximo */
  .cookie-modal__card{
    @apply w-full max-h-[85dvh] overflow-hidden flex flex-col rounded-2xl border border-slate-200 bg-white shadow-lg;
  }

  /* Header / Body / Footer (footer fijo, body scrollea) */
  .cookie-modal__header{
    @apply p-6 border-b border-slate-200 bg-white;
  }
  .cookie-modal__body{
    @apply flex-1 min-h-0 overflow-y-auto p-6 overscroll-contain;
    -webkit-overflow-scrolling: touch;
  }
  .cookie-modal__footer{
    @apply p-6 border-t border-slate-200 bg-white;
  }

  /* reduce motion */
  @media (prefers-reduced-motion: reduce){
    .account-dd > .account-dd__panel,
    .account-dd .chev,
    details > .mobile-menu,
    #cookie-banner,
    #cookie-modal,
    #cookie-modal > .absolute,
    #cookie-modal .cookie-modal__card{
      transition: none;
    }
  }

}

/* -----------------------------
   LOADER (ORBIT + PULSE PRO)
------------------------------ */
@layer components {
  .loader-overlay{
    @apply fixed inset-0 flex items-center justify-center opacity-0 pointer-events-none;
    z-index: 2147483647;
    background: rgba(2, 6, 23, .45);
    backdrop-filter: blur(6px);
    transition: opacity .2s ease;
  }

  .loader-overlay.is-open{
    opacity: 1;
    pointer-events: auto;
  }

  .loader-card{
    @apply rounded-2xl border border-white/15 bg-slate-900/60 px-6 py-5 shadow-lg;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  .loader-label{
    @apply mt-3 text-sm text-white/90 text-center;
  }

  .orbital-loader{
    width: var(--size, 52px);
    height: var(--size, 52px);
    position: relative;
    animation: orbit-spin 1.1s linear infinite;

    --radius: calc(var(--size, 52px) * 0.42);
    --dot: 10px;
  }

  /* Punto lógico (órbita) */
  .orbital-loader .dot{
    position: absolute;
    top: 50%;
    left: 50%;
  }

  /* Punto visible (pulso) */
  .orbital-loader .dot::before{
    content: "";
    position: absolute;
    width: var(--dot);
    height: var(--dot);
    border-radius: 9999px;
    background: rgba(255,255,255,.92);
    box-shadow: 0 0 0 1px rgba(255,255,255,.25);
    transform: translate(-50%, -50%);
    animation: dot-pulse .9s ease-in-out infinite;
  }

  /* Órbita perfecta */
  .orbital-loader .dot:nth-child(1){ transform: translate(-50%,-50%) rotate(0deg)   translate(var(--radius)); }
  .orbital-loader .dot:nth-child(2){ transform: translate(-50%,-50%) rotate(45deg)  translate(var(--radius)); }
  .orbital-loader .dot:nth-child(3){ transform: translate(-50%,-50%) rotate(90deg)  translate(var(--radius)); }
  .orbital-loader .dot:nth-child(4){ transform: translate(-50%,-50%) rotate(135deg) translate(var(--radius)); }
  .orbital-loader .dot:nth-child(5){ transform: translate(-50%,-50%) rotate(180deg) translate(var(--radius)); }
  .orbital-loader .dot:nth-child(6){ transform: translate(-50%,-50%) rotate(225deg) translate(var(--radius)); }
  .orbital-loader .dot:nth-child(7){ transform: translate(-50%,-50%) rotate(270deg) translate(var(--radius)); }
  .orbital-loader .dot:nth-child(8){ transform: translate(-50%,-50%) rotate(315deg) translate(var(--radius)); }

  /* Ritmo del pulso */
  .orbital-loader .dot:nth-child(1)::before{ animation-delay: 0s; }
  .orbital-loader .dot:nth-child(2)::before{ animation-delay: .06s; }
  .orbital-loader .dot:nth-child(3)::before{ animation-delay: .12s; }
  .orbital-loader .dot:nth-child(4)::before{ animation-delay: .18s; }
  .orbital-loader .dot:nth-child(5)::before{ animation-delay: .24s; }
  .orbital-loader .dot:nth-child(6)::before{ animation-delay: .30s; }
  .orbital-loader .dot:nth-child(7)::before{ animation-delay: .36s; }
  .orbital-loader .dot:nth-child(8)::before{ animation-delay: .42s; }

  @keyframes orbit-spin { to { transform: rotate(360deg); } }

  @keyframes dot-pulse{
    0%, 100% { transform: translate(-50%, -50%) scale(.72); opacity: .55; }
    50%      { transform: translate(-50%, -50%) scale(1.15); opacity: 1; }
  }

  @media (prefers-reduced-motion: reduce){
    .orbital-loader{ animation: none; }
    .orbital-loader .dot::before{ animation: none; opacity: .9; }
  }
}

/* -----------------------------
   NAV
------------------------------ */
@layer components {
  .nav-grain {
    @apply sticky top-0 z-50 border-b border-white/10 backdrop-blur;
    background:
      radial-gradient(1200px 60% at 50% 0%, rgba(99,102,241,.18), transparent 60%),
      linear-gradient(to bottom, rgba(49,46,129,.92), rgba(30,27,75,.88));
  }
  .nav-grain::before{
    content:"";
    position:absolute;
    inset:0;
    pointer-events:none;
    opacity:.18;
    mix-blend-mode:overlay;
    background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='140' height='140'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='140' height='140' filter='url(%23n)' opacity='.55'/%3E%3C/svg%3E");
  }
}
