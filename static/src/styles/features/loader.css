/* ----------------------------- LOADER (ORBIT + PULSE PRO) ------------------------------ */
@layer components {
  .loader-overlay{
    @apply fixed inset-0 flex items-center justify-center opacity-0 pointer-events-none;
    z-index: 2147483647;
    background: rgba(2, 6, 23, .45);
    backdrop-filter: blur(6px);
    transition: opacity .2s ease;
  }

  .loader-overlay.is-open{
    opacity: 1;
    pointer-events: auto;
  }

  .loader-card{
    @apply rounded-2xl border border-white/15 bg-slate-900/60 px-6 py-5 shadow-lg;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  .loader-label{
    @apply mt-3 text-sm text-white/90 text-center;
  }

  .orbital-loader{
    width: var(--size, 52px);
    height: var(--size, 52px);
    position: relative;
    animation: orbit-spin 1.1s linear infinite;

    --radius: calc(var(--size, 52px) * 0.42);
    --dot: 10px;
  }

  /* Punto lógico (órbita) */
  .orbital-loader .dot{
    position: absolute;
    top: 50%;
    left: 50%;
  }

  /* Punto visible (pulso) */
  .orbital-loader .dot::before{
    content: "";
    position: absolute;
    width: var(--dot);
    height: var(--dot);
    border-radius: 9999px;
    background: rgba(255,255,255,.92);
    box-shadow: 0 0 0 1px rgba(255,255,255,.25);
    transform: translate(-50%, -50%);
    animation: dot-pulse .9s ease-in-out infinite;
  }

  /* Órbita perfecta */
  .orbital-loader .dot:nth-child(1){ transform: translate(-50%,-50%) rotate(0deg) translate(var(--radius)); }
  .orbital-loader .dot:nth-child(2){ transform: translate(-50%,-50%) rotate(45deg) translate(var(--radius)); }
  .orbital-loader .dot:nth-child(3){ transform: translate(-50%,-50%) rotate(90deg) translate(var(--radius)); }
  .orbital-loader .dot:nth-child(4){ transform: translate(-50%,-50%) rotate(135deg) translate(var(--radius)); }
  .orbital-loader .dot:nth-child(5){ transform: translate(-50%,-50%) rotate(180deg) translate(var(--radius)); }
  .orbital-loader .dot:nth-child(6){ transform: translate(-50%,-50%) rotate(225deg) translate(var(--radius)); }
  .orbital-loader .dot:nth-child(7){ transform: translate(-50%,-50%) rotate(270deg) translate(var(--radius)); }
  .orbital-loader .dot:nth-child(8){ transform: translate(-50%,-50%) rotate(315deg) translate(var(--radius)); }

  /* Ritmo del pulso */
  .orbital-loader .dot:nth-child(1)::before{ animation-delay: 0s; }
  .orbital-loader .dot:nth-child(2)::before{ animation-delay: .06s; }
  .orbital-loader .dot:nth-child(3)::before{ animation-delay: .12s; }
  .orbital-loader .dot:nth-child(4)::before{ animation-delay: .18s; }
  .orbital-loader .dot:nth-child(5)::before{ animation-delay: .24s; }
  .orbital-loader .dot:nth-child(6)::before{ animation-delay: .30s; }
  .orbital-loader .dot:nth-child(7)::before{ animation-delay: .36s; }
  .orbital-loader .dot:nth-child(8)::before{ animation-delay: .42s; }

  @keyframes orbit-spin {
    to { transform: rotate(360deg); }
  }

  @keyframes dot-pulse{
    0%, 100% { transform: translate(-50%, -50%) scale(.72); opacity: .55; }
    50%      { transform: translate(-50%, -50%) scale(1.15); opacity: 1; }
  }

  @media (prefers-reduced-motion: reduce){
    .orbital-loader{ animation: none; }
    .orbital-loader .dot::before{ animation: none; opacity: .9; }
  }
}
