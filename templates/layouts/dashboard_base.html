{% extends "layouts/base.html" %}

{% block body %}
  <div class="mx-auto max-w-6xl px-4 py-6 sm:px-6">
    <div class="flex min-h-[75vh] flex-col gap-4 lg:flex-row">
      <!-- Sidebar -->
      <aside class="w-full lg:w-64 rounded-2xl border border-slate-200 bg-white p-4 shadow-sm">
        <div class="mb-4">
          <h2 class="text-base font-semibold">Panel</h2>
          <p class="mt-1 text-sm text-slate-500">Navegación rápida</p>
        </div>

        <nav class="space-y-1 text-sm">
          <a href="{% url 'pages:dashboard' %}"
             class="block rounded-lg px-3 py-2 font-medium
             {% if request.resolver_match.url_name == 'dashboard' %}
               bg-blue-50 text-blue-700
             {% else %}
               text-slate-700 hover:bg-slate-100
             {% endif %}">
            Dashboard
          </a>

          <a href="{% url 'pages:profile' %}"
             class="block rounded-lg px-3 py-2 font-medium
             {% if request.resolver_match.url_name == 'profile' %}
               bg-blue-50 text-blue-700
             {% else %}
               text-slate-700 hover:bg-slate-100
             {% endif %}">
            Mi Perfil
          </a>

          {% if user.is_guide %}
            <a href="{% url 'experiences:list' %}"
               class="block rounded-lg px-3 py-2 font-medium
               {% if request.resolver_match.app_name == 'experiences' %}
                 bg-blue-50 text-blue-700
               {% else %}
                 text-slate-700 hover:bg-slate-100
               {% endif %}">
              Mis Experiencias
            </a>

            <a href="{% url 'bookings:guide_list' %}"
               class="block rounded-lg px-3 py-2 font-medium
               {% if request.resolver_match.url_name == 'guide_list' %}
                 bg-blue-50 text-blue-700
               {% else %}
                 text-slate-700 hover:bg-slate-100
               {% endif %}">
              <span class="flex items-center justify-between">
                <span>Reservas Recibidas</span>
                {% if unseen_guide_bookings %}
                  <span class="ml-2 inline-flex items-center rounded-full bg-blue-600 px-2 py-0.5 text-xs font-semibold text-white">
                    {{ unseen_guide_bookings }}
                  </span>
                {% endif %}
              </span>
            </a>
          {% else %}
            <a href="{% url 'experiences:list' %}"
               class="block rounded-lg px-3 py-2 font-medium
               {% if request.resolver_match.app_name == 'experiences' %}
                 bg-blue-50 text-blue-700
               {% else %}
                 text-slate-700 hover:bg-slate-100
               {% endif %}">
              Explorar
            </a>

            <a href="{% url 'bookings:traveler_list' %}"
               class="block rounded-lg px-3 py-2 font-medium
               {% if request.resolver_match.url_name == 'traveler_list' %}
                 bg-blue-50 text-blue-700
               {% else %}
                 text-slate-700 hover:bg-slate-100
               {% endif %}">
              <span class="flex items-center justify-between">
                <span>Mis Reservas</span>
                {% if unseen_traveler_bookings %}
                  <span class="ml-2 inline-flex items-center rounded-full bg-blue-600 px-2 py-0.5 text-xs font-semibold text-white">
                    {{ unseen_traveler_bookings }}
                  </span>
                {% endif %}
              </span>
            </a>
          {% endif %}
        </nav>

        <div class="mt-4 border-t border-slate-200 pt-4 space-y-2">
          {% if user.is_authenticated %}
            <a href="{% url 'accounts:logout' %}"
              class="block rounded-lg bg-slate-900 px-3 py-2 text-center text-sm font-medium text-white hover:bg-slate-800">
              Salir
            </a>
          {% else %}
            <a href="{% url 'accounts:login' %}"
              class="block rounded-lg bg-blue-600 px-3 py-2 text-center text-sm font-medium text-white hover:bg-blue-500">
              Iniciar sesión
            </a>
            <a href="{% url 'accounts:register' %}"
              class="block rounded-lg px-3 py-2 text-center text-sm font-medium text-slate-700 hover:bg-slate-100 border border-slate-200">
              Crear cuenta
            </a>
          {% endif %}
        </div>
      </aside>

      <!-- Content -->
      <section class="flex-1 rounded-2xl border border-slate-200 bg-white p-6 shadow-sm">
        {% block dashboard_content %}{% endblock %}
      </section>
    </div>
  </div>
{% endblock %}
